function initializeAnniversary(){function t(e,n,a){try{let t=Lunar.fromYmdHms(e,n,a,0,0,0).getSolar();return new Date(t.getYear(),t.getMonth()-1,t.getDay())}catch(r){return t(e,n,a-1)}}function e(t,e){return Math.ceil((e-t)/864e5)}const n=document.querySelectorAll(".countdown"),a=document.querySelectorAll(".total-days"),r=document.querySelectorAll(".target-date");n.forEach((function(n){const a=n.getAttribute("data-date"),r=n.hasAttribute("data-lunar");n.textContent=function(n,a){const[r,l,u]=n.split("-").map(Number);let o,i=new Date;return i=new Date(i.getFullYear(),i.getMonth(),i.getDate()),a?(o=t(i.getFullYear(),l,u),o<i&&(o=t(i.getFullYear()+1,l,u))):(o=new Date(i.getFullYear(),l-1,u),o<i&&(o=new Date(i.getFullYear()+1,l-1,u))),e(i,o)}(a,r)})),a.forEach((function(n){const a=n.getAttribute("data-date"),r=n.hasAttribute("data-lunar");n.textContent=function(n,a){const[r,l,u]=n.split("-").map(Number);let o,i=new Date;return i=new Date(i.getFullYear(),i.getMonth(),i.getDate()),o=a?t(r,l,u):new Date(r,l-1,u),e(o,i)}(a,r)})),r.forEach((function(e){const n=e.getAttribute("data-date"),a=e.hasAttribute("data-lunar");e.textContent=function(e,n){const[a,r,l]=e.split("-").map(Number);let u,o=new Date;return o=new Date(o.getFullYear(),o.getMonth(),o.getDate()),n?(u=t(o.getFullYear(),r,l),u<o&&(u=t(o.getFullYear()+1,r,l))):(u=new Date(o.getFullYear(),r-1,l),u<o&&(u=new Date(o.getFullYear()+1,r-1,l))),`${u.getFullYear()}-${(u.getMonth()+1).toString().padStart(2,"0")}-${u.getDate().toString().padStart(2,"0")}`}(n,a)}))}document.addEventListener("DOMContentLoaded",initializeAnniversary),document.addEventListener("pjax:complete",initializeAnniversary);