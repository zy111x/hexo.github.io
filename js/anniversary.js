function initializeAnniversary(){function s(e,n,a){try{let t=Lunar.fromYmdHms(e,n,a,0,0,0).getSolar();return new Date(t.getYear(),t.getMonth()-1,t.getDay())}catch(t){return s(e,n,a-1)}}function u(t,e){const n=24*60*60*1e3;return Math.ceil((e-t)/n)}function a(t,e){const[n,a,r]=t.split("-").map(Number);let l=new Date;l=new Date(l.getFullYear(),l.getMonth(),l.getDate());let o;if(e){o=s(l.getFullYear(),a,r);if(o<l){o=s(l.getFullYear()+1,a,r)}}else{o=new Date(l.getFullYear(),a-1,r);if(o<l){o=new Date(l.getFullYear()+1,a-1,r)}}return u(l,o)}function r(t,e){const[n,a,r]=t.split("-").map(Number);let l=new Date;l=new Date(l.getFullYear(),l.getMonth(),l.getDate());let o;if(e){o=s(n,a,r)}else{o=new Date(n,a-1,r)}return u(o,l)}function l(t,e){const[n,a,r]=t.split("-").map(Number);let l=new Date;l=new Date(l.getFullYear(),l.getMonth(),l.getDate());let o;if(e){o=s(l.getFullYear(),a,r);if(o<l){o=s(l.getFullYear()+1,a,r)}}else{o=new Date(l.getFullYear(),a-1,r);if(o<l){o=new Date(l.getFullYear()+1,a-1,r)}}const u=o.getFullYear();const i=(o.getMonth()+1).toString().padStart(2,"0");const c=o.getDate().toString().padStart(2,"0");return`${u}-${i}-${c}`}const t=document.querySelectorAll(".countdown");const e=document.querySelectorAll(".total-days");const n=document.querySelectorAll(".target-date");t.forEach(function(t){const e=t.getAttribute("data-date");const n=t.hasAttribute("data-lunar");t.textContent=a(e,n)});e.forEach(function(t){const e=t.getAttribute("data-date");const n=t.hasAttribute("data-lunar");t.textContent=r(e,n)});n.forEach(function(t){const e=t.getAttribute("data-date");const n=t.hasAttribute("data-lunar");t.textContent=l(e,n)})}document.addEventListener("DOMContentLoaded",initializeAnniversary);document.addEventListener("pjax:complete",initializeAnniversary);